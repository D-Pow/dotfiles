<html>
<head>
    <!-- <link href="https://github.githubassets.com/assets/github-3b5209332055a760a88dfdc77e1523b4.css" rel="stylesheet"> -->
    <link href="https://github.githubassets.com/assets/frameworks-8c550109d58e0353afdf1a37a05301c2.css" rel="stylesheet">
</head>
<body>

    <!-- <div class="highlight highlight-source-js">
        <pre>
            <span class="pl-k">var</span>
            <span class="pl-s1">obj</span>
            <span class="pl-c1">=</span>
            <span class="pl-kos">{</span>
            <span class="pl-en">print</span>: <span class="pl-k">function</span>
            <span class="pl-kos">(</span>
            <span class="pl-kos">)</span>
            <span class="pl-kos">{</span>
            <span class="pl-smi">console</span>
            <span class="pl-kos">.</span>
            <span class="pl-en">log</span>
            <span class="pl-kos">(</span>
            <span class="pl-smi">this</span>
            <span class="pl-kos">)</span>
            <span class="pl-kos">;</span>
            <span class="pl-kos">}</span>
            <span class="pl-kos">}</span>
            <span class="pl-kos">;</span>
        </pre>
    </div> -->

    <script>
        // Will produce the above output
        async function getMarkdownFlavoredFormattedCode(text) {
            const res = await fetch('https://api.github.com/markdown', {
                method: 'POST',
                body: JSON.stringify({
                    text
                })
            });
            const formattedHtml = await res.text();

            return formattedHtml;
        }

        function createElementFromString(html) {
            const div = document.createElement('div');
            div.innerHTML = html;
            return div.childNodes;
        }

        function appendChildrenToBody(nodeList) {
            nodeList.forEach(node => document.body.appendChild(node));
        }

        async function appendFormattedCodeToBody(code) {
            const html = await getMarkdownFlavoredFormattedCode(code);

            appendChildrenToBody(createElementFromString(html));
        }

        appendFormattedCodeToBody("```javascript\nvar obj = { \n    print: function() {\n        console.log('Hello world');\n    }\n};\n```");
        appendFormattedCodeToBody('```java\npublic class MyClass { \n    public static void main(String[] args) {\n        System.out.println("Hello " + "World!");\n    }\n}\n```');
    </script>

</body>
</html>
